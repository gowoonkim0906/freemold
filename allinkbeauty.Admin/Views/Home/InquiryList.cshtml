@using Freemold.Modules.Models;


@model IEnumerable<InquiryModel>


<div class="container-fluid px-4">
    <!--<div class="mb-3 mt-4">
        <form class="d-flex align-items-center" role="search">
            <input type="text" class="form-control form-control-sm me-2" placeholder="이름 검색" style="max-width: 100px;">
            <span class="mx-2">~</span>
            <input type="text" class="form-control form-control-sm me-2" placeholder="근무지 검색" style="max-width: 100px;">
            <button type="submit" class="btn btn-sm btn-primary">검색</button>
        </form>
    </div>-->
    <div class="row mt-4">
        <div class="col-xl-12">
            <div class="card-body">
                <table class="table table-bordered table-hover table-sm mb-0">
                    <thead class="table-light">
                        <tr class="text-center">
                            <th style="width:5%;">번호</th>
                            <th style="width:5%;">문의제품</th>
                            <th style="width:10%;">작성자</th>
                            <th style="width:10%;">이메일</th>
                            <th style="width:10%;">회사</th>
                            <th>내용</th>
                            <th style="width:10%;">국가</th>
                            <th style="width:5%;">작성일</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr onclick="InquiryViewForm('@item.Idx');" style="cursor:pointer;">
                                <td></td>
                                <td>@item.ProductName</td>
                                <td>@item.Name</td>
                                <td>@item.Email</td>
                                <td>@item.Company</td>
                                <td>@item.Inquiry</td>
                                <td>@item.RegCountry</td>
                                <td>@item.RegDate.ToString("yyyy.MM.dd")</td>
                            </tr>
                        }
                    </tbody>
                </table>

                @Html.Partial(Url.Content("_Pagination"))
                
            </div>
        </div>
    </div>

</div>


<div class="modal fade" id="InquiryViewModal" tabindex="-1" aria-labelledby="InquiryViewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title" id="Inquirytitle">펌텍코리아(주) : EL 미스트 용기</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
            </div>

            <div class="modal-body">
                <div class="mb-2 row">
                    <div class="col-sm-3" id="productimg">
                        <img src="https://www.freemold.net/data/Product/2022-04/thumb/1649732652_1.jpg" />
                    </div>
                    <div class="col-sm-9">
                        <table class="table table-bordered">
                            <tbody>
                                <tr>
                                    <th style="width: 15%;">제품코드</th>
                                    <td id="viewcode">게시글 제목입니다</td>
                                </tr>
                                <tr>
                                    <th>용량</th>
                                    <td id="viewcapacity">홍길동</td>
                                </tr>
                                <tr>
                                    <th>사이즈</th>
                                    <td id="viewsize">hong@example.com</td>
                                </tr>
                                <tr>
                                    <th>재질</th>
                                    <td id="viewquality">hong@example.com</td>
                                </tr>


                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="mb-2 row">
                    <div class="col-sm-12">
                        <table class="table table-bordered">
                            <tbody>
                                <tr>
                                    <th style="width: 15%;">작성자</th>
                                    <td id="viewname">홍길동</td>
                                </tr>
                                <tr>
                                    <th>이메일</th>
                                    <td id="viewemail">hong@example.com</td>
                                </tr>
                                <tr>
                                    <th>회사</th>
                                    <td id="viewcompany">hong@example.com</td>
                                </tr>
                                <tr>
                                    <th>내용</th>
                                    <td style="min-height: 150px;" id="viewinquiry">
                                        게시글 본문입니다.<br />
                                        여러 줄도 가능하며, HTML 포맷팅도 지원할 수 있습니다.
                                    </td>
                                </tr>
                                <tr>
                                    <th>IP/국가</th>
                                    <td id="viewregcountry">hong@example.com</td>
                                </tr>
                                <tr>
                                    <th>작성일</th>
                                    <td id="viewregdate">2025-08-06 10:23</td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                    
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
            </div>

        </div>
    </div>
</div>

<script language="javascript">

    function InquiryViewForm(idx){
    

        var param = {
             idx: idx
         };


        $.post('InquiryView', param, function (result) {
            
            if(result.item1 == "success"){

                console.log(result.item3);

                let imgname = result.item3.pimg1;
                let imgwidth = 150;
                let imgheight = 150;

                let pimg = `<img src = "http://freemold.net/data/Product/${imgname}" style="width:${imgwidth}px;height:${imgheight}px;">`;
                $("#productimg").html(pimg);

                $("#Inquirytitle").text(result.item3.company_name+" : "+result.item3.pname);
                $("#viewcode").text(result.item3.pcode);
                $("#viewcapacity").text(result.item3.pcapacity+result.item3.pcapunit);
                $("#viewsize").text(result.item3.psize);
                $("#viewquality").text(result.item3.pquality);
            
                $("#viewname").text(result.item2.name);
                $("#viewcompany").text(result.item2.company);
                $("#viewinquiry").text(result.item2.inquiry);
                $("#viewregcountry").text(result.item2.regCountry);
                $("#viewregdate").text(result.item2.regDate);

                

            }else{
                alert('error')
            }
            
        });

        $('#InquiryViewModal').modal('show');
    }

</script>